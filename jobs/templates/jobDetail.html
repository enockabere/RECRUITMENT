{% extends 'offcanvas.html' %}
{% load bootstrap5 %}
{% load static %}
{% block main %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<section class="">
    <div class="content-wrapper">
        <!--alert -->
        {% include 'alerts.html' %}
        <div class="container-xxl wow fadeInUp" data-wow-delay="0.1s">
            <div class="container">
                <div class="row gy-5 gx-4">
                    <div class="col-lg-12">
                        <div class="d-flex align-items-center mb-5">
                            <div class="text-start">
                                <h3 class="mb-3 text-dark">{{res.Description}} </h3>
                                <span class="text-truncate me-3 text-secondary">
                                    <i class="fa-solid fa-graduation-cap text-info"></i>
                                    {{Qualifications.Education_Level}}
                                </span>
                                <span class="text-truncate me-3 text-secondary">
                                    <i class="fa-solid fa-briefcase text-info"></i>
                                    {{res.Appointment_Type}}</span>
                                <span class="text-truncate me-0 text-secondary">
                                    <i class="fa-solid fa-business-time text-info"></i>
                                    {{experience.No__of_Years}}
                                    Year(s) Relevant Work Experience
                                </span>
                            </div>
                        </div>

                        <div class="mb-5 text-dark">
                            <h4 class="mb-3">Job description</h4>

                            <p>{{res.Job_Description}}</p>

                            <h4 class="mb-3">Job Specifications</h4>
                            <ul class="list-unstyled">
                                {% for res in RESPOs %}
                                <li><i class="fa fa-angle-right text-primary me-2"></i>{{res.Description}}</li>
                                {% endfor %}
                            </ul>
                            <h4 class="mb-3">Qualifications</h4>
                            <ul class="list-unstyled">
                                <li><i class="fa fa-angle-right text-primary me-2"></i>
                                    <span>{{Qualifications.Education_Level}}</span> - {{Qualifications.Field_Name}}
                                </li>
                            </ul>
                            <h4 class="mb-3">Professional Courses</h4>
                            <ul class="list-unstyled">
                                {% for res in Course %}
                                <li><i class="fa fa-angle-right text-primary me-2"></i>
                                    {{res.Qualification_Name}}
                                </li>
                                {% endfor %}
                            </ul>
                            <h4 class="mb-3">Professional Memberships</h4>
                            <ul class="list-unstyled">
                                {% for res in JobMembeship %}
                                <li><i class="fa fa-angle-right text-primary me-2"></i>
                                    <span>{{res.Name}}</span> - {{res.Description}}
                                </li>
                                {% endfor %}
                            </ul>
                            <h4 class="mb-3">Key Competencies and Skills</h4>
                            <ul class="list-unstyled">
                                {% for res in Skill %}
                                <li><i class="fa fa-angle-right text-primary me-2"></i>
                                    {{res.Description}}
                                </li>
                                {% endfor %}
                            </ul>
                            <h4 class="mb-3">Reporting To</h4>
                            <ul class="list-unstyled">
                                {% for res in Position %}
                                <li><i class="fa fa-angle-right text-primary me-2"></i>
                                    {{res.Description}}
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row my-3 bg-white p-3">
                    <div class="col-md-12">
                        <h5 class="text-primary">Upload Attachments</h5>
                        <div class="row">
                            <div class="col-md-8">
                                <form action="{% url 'UploadAttachedDocument' res.Job_ID res.No_ %}" method="POST"
                                    enctype="multipart/form-data" novalidate>
                                    {% csrf_token %}
                                    <div class="row">
                                        <div class="col-md-12">
                                            <select class="form-select" name="fileName" required>
                                                <option value="0" selected disabled>--select attachment type--</option>
                                                {% for response in Attach %}
                                                <option value="{{response.Attachment}}">{{response.Description}}
                                                </option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label class="form-label">Attachment</label>
                                            <input type="file" class="form-control" id="" name="attachment"
                                                accept="application/pdf">
                                            <button type="submit" class="btn btn-primary my-3">Upload</button>
                                            <button type="button" class="btn btn-secondary my-3" id="viewBtn">View
                                                attachments</button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                            <div class="col-md-4">
                                <div class="alert alert-success" role="alert">
                                    <h4 class="alert-heading">Note!</h4>
                                    <p>Please upload PDF attachments only and they should not exceed 5MB in size.</p>
                                    <hr>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="attachemntsRow row" style="display: none;">
                        {% for data in attached_list %}
                        <div class="col-lg-4 col-xl-3">
                            <div class="file-man-box">
                                <form action="" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="docID" value="{{data.AuxiliaryIndex2}}">
                                    <input type="hidden" name="tableID" value="{{data.Table_ID}}">
                                    <button class="file-close" id="file-close"><i
                                            class="fa fa-times-circle"></i></button>
                                </form>
                                <div class="file-img-box"><img src="../../static/img/icons/file_download.png"
                                        alt="icon">
                                </div>
                                <div class="file-man-title p-3">
                                    <h5 class="mb-0 text-overflow">
                                        {{data.File_Name}}.{{data.File_Extension}}</h5>
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <p class="text-danger">
                            You have not uploaded any attachments <i class="las la-file-download"></i>
                        </p>
                        {% endfor %}
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-12">
                        <form action="{% url 'FnApplicantApplyJob' res.Job_ID res.No_  %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="needCode" value="{{res.No_}}">
                            <button type="submit" class="button-88 my-3 w-100">Submit Application <i
                                    class="las la-arrow-right submit-icon"></i></button>
                        </form>

                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#viewBtn').click(function () {
            $('.attachemntsRow').toggle(500);
        })
    })
</script>
{% endblock %}